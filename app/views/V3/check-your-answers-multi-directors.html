{% extends "layouts/main.html" %}

{% block pageTitle %}
  Check your answers – {{ serviceName }} – GOV.UK Prototype Kit
{% endblock %}

{% block beforeContent %}
  {{ govukBackLink({
    text: "Back",
    href: "javascript:window.history.back()"
  }) }}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds-from-desktop">
      <form action="/V3/check-your-answers-multi-directors" method="post" novalidate>

        <h1 class="govuk-heading-xl">
          Check your answers
        </h1>

        {# --- Loop through all selected directors --- #}
        {% for director in data.whichDirectorsWillBeSigningTheApplication %}

          {# Director name heading #}
          <h2 class="govuk-heading-m govuk-!-margin-top-6">
            {{ director 
               | replace("JaneDoe", "DOE, Jane")
               | replace("SaraFrancis", "FRANCIS, Sara")
               | replace("JamesShipley", "SHIPLEY, James") }}
          </h2>

          {# Build summary list rows dynamically #}
          {% set rows = [
            {
              key: { text: "Name" },
              value: { text: director
                | replace("JaneDoe", "DOE, Jane")
                | replace("SaraFrancis", "FRANCIS, Sara")
                | replace("JamesShipley", "SHIPLEY, James")
              }
            },
            {
              key: { text: "Email address" },
              value: { text: data["directorEmail" + loop.index0] or "" }
            }
          ] %}

          {{ govukSummaryList({
            rows: rows
          }) }}

        {% endfor %}

        {{ govukButton({
          text: "Continue"
        }) }}

      </form>
    </div>
  </div>
{% endblock %}

