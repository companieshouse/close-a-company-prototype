{% extends "layouts/main.html" %}

{% block pageTitle %}
  Check your answers – {{ serviceName }} – GOV.UK Prototype Kit
{% endblock %}

{% block beforeContent %}
  {{ govukBackLink({
    text: "Back",
    href: "javascript:window.history.back()"
  }) }}
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds-from-desktop">
    <form action="/V4/check-your-answers-multi-directors" method="post" novalidate>

      <h1 class="govuk-heading-xl">Check your answers</h1>

      {# Count how many directors were selected #}
      {% set directorCount = data.whichDirectorsWillBeSigningTheApplication | length %}

      {% for director in data.whichDirectorsWillBeSigningTheApplication %}

        {# Display name for heading #}
        {% set displayName =
          director
            | replace("JaneDoe", "DOE, Jane")
            | replace("SaraFrancis", "FRANCIS, Sara")
            | replace("JamesShipley", "SHIPLEY, James")
            | replace("AcmeLtd", "ACME LTD")
        %}

        <h2 class="govuk-heading-m govuk-!-margin-top-6">{{ displayName }}</h2>

        {# Email key (matches previous page) #}
        {% set emailKey = "directorEmail" + loop.index0 %}

        {# Corporate signer name (only for Acme Ltd) #}
        {% if director == "AcmeLtd" %}
          {% set nameKey = "corporateSignerName" + loop.index0 %}
        {% endif %}

        {{ govukSummaryList({
          rows: [
            {
              key: { text: "Name" },
              value: {
                text:
                  data[nameKey] if director == "AcmeLtd"
                  else displayName
              }
            },
            {
              key: { text: "Email address" },
              value: { text: data[emailKey] or "" },
              actions: {
                items: [
                  {
                    text: "Change",
                    href: "/V4/provide-corporate-directors-emails",
                    visuallyHiddenText: "email for " + displayName
                  }
                ]
              }
            }
          ]
        }) }}

      {% endfor %}

      {# Add/remove directors link BELOW the summary lists #}
  
        <p class="govuk-body govuk-!-margin-top-4 govuk-!-text-align-left">
          <a class="govuk-link" href="/V4/which-directors-will-be-signing">
            Change which directors will sign
          </a>
        </p>


      {{ govukButton({
        text: "Continue"
      }) }}

    </form>
  </div>
</div>
{% endblock %}
